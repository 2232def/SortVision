<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://*.google-analytics.com data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://www.google-analytics.com https://*.google-analytics.com https://*.analytics.google.com https://*.g.doubleclick.net; connect-src 'self' https://www.google-analytics.com https://*.google-analytics.com https://analytics.google.com https://*.analytics.google.com https://stats.g.doubleclick.net https://*.g.doubleclick.net; frame-src 'none'; object-src 'none';">
    
    <!-- Primary Meta Tags -->
    <title>SortVision | Interactive Sorting Algorithm Visualizer & Learning Tool</title>
    <meta name="title" content="SortVision | Interactive Sorting Algorithm Visualizer & Learning Tool">
    <meta name="description" content="Master sorting algorithms with interactive visualizations. Compare Bubble, Merge, Quick Sort and more with real-time animations and metrics.">
    <meta name="keywords" content="sorting visualizer, algorithm visualizer, bubble sort, merge sort, quick sort, insertion sort, selection sort, interactive sorting, learn sorting algorithms, algorithm comparison, sorting algorithm complexity, programming education, learn coding, computer science, data structures">
    <meta name="author" content="alienX">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://sortvision.vercel.app/">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="rating" content="General">
    
    <!-- Viewport and Theme Color -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#0F172A">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SortVision">
    <meta name="application-name" content="SortVision">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Preconnect to critical domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="apple-touch-icon" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Critical CSS in-lined to avoid render blocking -->
    <style>
      /* CSS Variables for iOS height fix */
      :root {
        --app-height: 100vh;
      }
      
      /* Fix for iOS scrolling */
      html, body {
        position: relative;
        height: 100%;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        background-color: #0F172A;
        color: #e2e8f0;
      }
      
      /* Use the dynamic height variable */
      .min-h-screen {
        min-height: var(--app-height);
      }
      
      /* Ensure content is scrollable */
      #root {
        height: auto;
        min-height: var(--app-height);
        overflow-y: auto;
      }
      
      /* Basic responsive styles */
      @media (max-width: 480px) {
        body {
          font-size: 14px;
        }
      }
      
      @media (min-width: 481px) and (max-width: 768px) {
        body {
          font-size: 15px;
        }
      }
      
      @media (min-width: 769px) {
        body {
          font-size: 16px;
        }
      }
    </style>
    
    <!-- Preload critical assets -->
    <link rel="preload" href="/src/main.jsx" as="script">
    <link rel="preload" href="/mobile-fix.js" as="script">
    
    <!-- Load font stylesheet asynchronously with display=swap to avoid render blocking -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'" fetchpriority="low">
    <noscript>
      <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    </noscript>
    
    <!-- Mobile-specific styles (loaded asynchronously) -->
    <link rel="stylesheet" href="/mobile.css" media="print" onload="this.media='all'" fetchpriority="low">
    <noscript>
      <link rel="stylesheet" href="/mobile.css">
    </noscript>
    
    <!-- Mobile scrolling fix -->
    <script src="/mobile-fix.js" defer></script>
    
    <!-- Debug script (loaded conditionally) -->
    <script src="/debug.js" defer fetchpriority="low"></script>
    
    <!-- Mobile debug script (development only) -->
    <script>
      // Only include the debug script in development environments
      if (window.location.hostname === 'localhost' || 
          window.location.hostname === '127.0.0.1' ||
          window.location.search.includes('CR7=GOAT')) {
        const debugScript = document.createElement('script');
        debugScript.src = '/devTools.vizor.js';
        debugScript.defer = true;
        document.head.appendChild(debugScript);
      }
    </script>
    
    <!-- Open Graph / Facebook (deferred) -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sortvision.vercel.app/">
    <meta property="og:title" content="SortVision | Interactive Sorting Algorithm Visualizer & Learning Tool">
    <meta property="og:description" content="Master sorting algorithms with interactive visualizations. Compare Bubble, Merge, Quick Sort and more with real-time animations and metrics.">
    <meta property="og:image" content="https://sortvision.vercel.app/og-image.png">
    <meta property="og:image:alt" content="SortVision - Sorting Algorithm Visualizer">
    <meta property="og:site_name" content="SortVision">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter (deferred) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://sortvision.vercel.app/">
    <meta name="twitter:title" content="SortVision | Interactive Sorting Algorithm Visualizer & Learning Tool">
    <meta name="twitter:description" content="Master sorting algorithms with interactive visualizations. Compare Bubble, Merge, Quick Sort and more with real-time animations and metrics.">
    <meta name="twitter:image" content="https://sortvision.vercel.app/og-image.png">
    <meta name="twitter:creator" content="@alienx5499">
    <meta name="twitter:site" content="@alienx5499">
    
    <!-- Lazy-load Google Analytics -->
    <script>
      // Defer loading of GA
      window.addEventListener('load', function() {
        // GA initialization
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-SZPR3VLNV0', {
          'send_page_view': false, // Manually send page view later
          'anonymize_ip': true
        });
        
        // Load GA script
        const gaScript = document.createElement('script');
        gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-SZPR3VLNV0';
        gaScript.async = true;
        document.head.appendChild(gaScript);
        
        // Send pageview after delay
        setTimeout(function() {
          gtag('event', 'page_view');
        }, 2000);
      });
    </script>
    
    <!-- Structured Data in JSON-LD format (loaded after critical content) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "SortVision",
      "url": "https://sortvision.vercel.app/",
      "logo": "https://sortvision.vercel.app/favicon.svg",
      "applicationCategory": "EducationalApplication",
      "applicationSubCategory": "Algorithm Visualization",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Interactive visualization of popular sorting algorithms including Bubble Sort, Merge Sort, Quick Sort, and more with real-time animations and performance metrics.",
      "creator": {
        "@type": "Person",
        "name": "alienX"
      },
      "screenshot": "https://sortvision.vercel.app/og-image.png",
      "featureList": "Bubble Sort, Insertion Sort, Selection Sort, Merge Sort, Quick Sort, Heap Sort, Radix Sort, Performance Metrics, Algorithm Comparison",
      "keywords": "sorting algorithms, algorithm visualization, computer science education, programming tools",
      "sameAs": [
        "https://github.com/alienx5499/SortVision",
        "https://x.com/alienx5499"
      ]
    }
    </script>
    
    <!-- Structured Data: BreadcrumbList (loaded after critical content) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://sortvision.vercel.app/"
        }
      ]
    }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Noscript message for users without JavaScript -->
    <noscript>
      <div style="text-align: center; padding: 20px; background-color: #0F172A; color: white; font-family: 'JetBrains Mono', monospace;">
        <h1>SortVision - Interactive Sorting Algorithm Visualizer</h1>
        <p>JavaScript is required to use this application. Please enable JavaScript to continue.</p>
        <p>SortVision provides interactive visualizations of popular sorting algorithms including Bubble Sort, Merge Sort, Quick Sort, and more.</p>
      </div>
    </noscript>
    
    <!-- Prevent Flash of Unstyled Content -->
    <script>
      // Apply dark mode immediately to prevent flash
      document.documentElement.classList.add('dark');
      document.body.style.backgroundColor = '#0F172A';
      
      // Add touch class to body for mobile-specific styling
      if ('ontouchstart' in document.documentElement) {
        document.body.classList.add('touch-device');
      }
      
      // Register Service Worker for offline support
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          // Delay registration to ensure main content loads first
          setTimeout(() => {
            navigator.serviceWorker.register('/sw.js')
              .catch(error => {
                console.log('ServiceWorker registration failed: ', error);
              });
          }, 3000);
        });
      }
      
      // Fix for iOS viewport height issues
      function setAppHeight() {
        document.documentElement.style.setProperty('--app-height', `${window.innerHeight}px`);
      }
      window.addEventListener('resize', setAppHeight);
      window.addEventListener('orientationchange', setAppHeight);
      setAppHeight();
      
      // Add mobile detection for adaptive features
      const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      if (isMobile) {
        document.body.classList.add('mobile-device');
        
        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
          // Update height variable
          setAppHeight();
          
          // Set orientation classes
          const isPortrait = window.matchMedia("(orientation: portrait)").matches;
          document.body.classList.toggle('portrait', isPortrait);
          document.body.classList.toggle('landscape', !isPortrait);
        });
        
        // Set initial orientation class
        const isPortrait = window.matchMedia("(orientation: portrait)").matches;
        document.body.classList.toggle('portrait', isPortrait);
        document.body.classList.toggle('landscape', !isPortrait);
      }
    </script>
  </body>
</html>
