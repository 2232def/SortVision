<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://*.google-analytics.com data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://www.google-analytics.com https://*.google-analytics.com https://*.analytics.google.com https://*.g.doubleclick.net; connect-src 'self' https://www.google-analytics.com https://*.google-analytics.com https://analytics.google.com https://*.analytics.google.com https://stats.g.doubleclick.net https://*.g.doubleclick.net; frame-src 'none'; object-src 'none';">
    
    <!-- Primary Meta Tags -->
    <title>SortVision | Interactive Sorting Algorithm Visualizer & Learning Tool</title>
    <meta name="title" content="SortVision | Interactive Sorting Algorithm Visualizer & Learning Tool">
    <meta name="description" content="Master sorting algorithms with interactive visualizations. Compare Bubble, Merge, Quick Sort and more with real-time animations and metrics.">
    <meta name="keywords" content="sorting visualizer, algorithm visualizer, bubble sort, merge sort, quick sort, insertion sort, selection sort, interactive sorting, learn sorting algorithms, algorithm comparison, sorting algorithm complexity, programming education, learn coding, computer science, data structures">
    <meta name="author" content="alienX">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <link rel="canonical" href="https://sortvision.vercel.app/">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="rating" content="General">
    
    <!-- Preconnect to needed origins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical CSS in-lined to avoid render blocking -->
    <style>
      /* CSS Variables for iOS height fix */
      :root {
        --app-height: 100vh;
      }
      
      /* Fix for iOS scrolling */
      html, body {
        position: relative;
        height: 100%;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        background-color: #0F172A;
        color: #e2e8f0;
      }
      
      /* Use the dynamic height variable */
      .min-h-screen {
        min-height: var(--app-height);
      }
      
      /* Ensure content is scrollable */
      #root {
        height: auto;
        min-height: var(--app-height);
        overflow-y: auto;
      }
      
      /* Basic responsive styles */
      @media (max-width: 480px) {
        body {
          font-size: 14px;
        }
      }
      
      @media (min-width: 481px) and (max-width: 768px) {
        body {
          font-size: 15px;
        }
      }
      
      @media (min-width: 769px) {
        body {
          font-size: 16px;
        }
      }
    </style>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="apple-touch-icon" href="/favicon.svg">
    <link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Viewport and Theme Color -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#0F172A">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SortVision">
    <meta name="application-name" content="SortVision">
    <meta name="format-detection" content="telephone=no">
    
    <!-- iOS Splash Screens -->
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/splash.svg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sortvision.vercel.app/">
    <meta property="og:title" content="SortVision | Interactive Sorting Algorithm Visualizer & Learning Tool">
    <meta property="og:description" content="Master sorting algorithms with interactive visualizations. Compare Bubble, Merge, Quick Sort and more with real-time animations and metrics.">
    <meta property="og:image" content="https://sortvision.vercel.app/og-image.png">
    <meta property="og:image:alt" content="SortVision - Sorting Algorithm Visualizer">
    <meta property="og:site_name" content="SortVision">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://sortvision.vercel.app/">
    <meta name="twitter:title" content="SortVision | Interactive Sorting Algorithm Visualizer & Learning Tool">
    <meta name="twitter:description" content="Master sorting algorithms with interactive visualizations. Compare Bubble, Merge, Quick Sort and more with real-time animations and metrics.">
    <meta name="twitter:image" content="https://sortvision.vercel.app/og-image.png">
    <meta name="twitter:creator" content="@alienx5499">
    <meta name="twitter:site" content="@alienx5499">
    
    <!-- Structured Data: Website -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "SortVision",
      "url": "https://sortvision.vercel.app/",
      "logo": "https://sortvision.vercel.app/favicon.svg",
      "applicationCategory": "EducationalApplication",
      "applicationSubCategory": "Algorithm Visualization",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Interactive visualization of popular sorting algorithms including Bubble Sort, Merge Sort, Quick Sort, and more with real-time animations and performance metrics.",
      "creator": {
        "@type": "Person",
        "name": "alienX"
      },
      "screenshot": "https://sortvision.vercel.app/og-image.png",
      "featureList": "Bubble Sort, Insertion Sort, Selection Sort, Merge Sort, Quick Sort, Heap Sort, Radix Sort, Performance Metrics, Algorithm Comparison",
      "keywords": "sorting algorithms, algorithm visualization, computer science education, programming tools",
      "sameAs": [
        "https://github.com/alienx5499/SortVision",
        "https://x.com/alienx5499"
      ]
    }
    </script>
    
    <!-- Structured Data: BreadcrumbList -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://sortvision.vercel.app/"
        }
      ]
    }
    </script>
    
    <!-- Preload critical assets -->
    <link rel="preload" href="/src/main.jsx" as="script">
    <link rel="preload" href="/mobile-fix.js" as="script">
    
    <!-- Load font stylesheet asynchronously to avoid render blocking -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript>
      <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    </noscript>
    
    <!-- Mobile-specific styles -->
    <link rel="stylesheet" href="/mobile.css" media="print" onload="this.media='all'">
    <noscript>
      <link rel="stylesheet" href="/mobile.css">
    </noscript>
    
    <!-- Mobile App Install Prompt -->
    <meta name="apple-touch-startup-image" content="/splash.svg">
    
    <!-- Mobile scrolling fix -->
    <script src="/mobile-fix.js" defer></script>
    
    <!-- Debug script to catch 404 errors -->
    <script src="/debug.js" defer></script>
    
    <!-- Mobile debug script (development only) -->
    <script>
      // Only include the debug script in development environments
      if (window.location.hostname === 'localhost' || 
          window.location.hostname === '127.0.0.1' ||
          window.location.search.includes('debug=mobile')) {
        const debugScript = document.createElement('script');
        debugScript.src = '/mobile-debug.js';
        debugScript.defer = true;
        document.head.appendChild(debugScript);
        console.log('Mobile debug script loaded - add ?debug=mobile to URL to see controls');
      }
    </script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SZPR3VLNV0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-SZPR3VLNV0');
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Noscript message for users without JavaScript -->
    <noscript>
      <div style="text-align: center; padding: 20px; background-color: #0F172A; color: white; font-family: 'JetBrains Mono', monospace;">
        <h1>SortVision - Interactive Sorting Algorithm Visualizer</h1>
        <p>JavaScript is required to use this application. Please enable JavaScript to continue.</p>
        <p>SortVision provides interactive visualizations of popular sorting algorithms including Bubble Sort, Merge Sort, Quick Sort, and more.</p>
      </div>
    </noscript>
    
    <!-- Prevent Flash of Unstyled Content -->
    <script>
      // Apply dark mode immediately to prevent flash
      document.documentElement.classList.add('dark');
      document.body.style.backgroundColor = '#0F172A';
      
      // Add touch class to body for mobile-specific styling
      if ('ontouchstart' in document.documentElement) {
        document.body.classList.add('touch-device');
      }
      
      // Register Service Worker for offline support
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(error => {
              console.log('ServiceWorker registration failed: ', error);
            });
        });
      }
      
      // Add mobile detection for adaptive features
      const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      if (isMobile) {
        document.body.classList.add('mobile-device');
        
        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
          // Delay to ensure DOM updates after orientation change
          setTimeout(() => {
            const isPortrait = window.matchMedia("(orientation: portrait)").matches;
            document.body.classList.toggle('portrait', isPortrait);
            document.body.classList.toggle('landscape', !isPortrait);
          }, 100);
        });
        
        // Set initial orientation class
        const isPortrait = window.matchMedia("(orientation: portrait)").matches;
        document.body.classList.toggle('portrait', isPortrait);
        document.body.classList.toggle('landscape', !isPortrait);
        
        // Add a more targeted approach to handle pinch zoom only in the visualization area
        window.addEventListener('load', () => {
          // Find the visualization container
          const visualizationContainer = document.querySelector('.visualization-container');
          if (visualizationContainer) {
            visualizationContainer.addEventListener('touchmove', function(event) {
              if (event.scale !== 1) {
                event.preventDefault();
              }
            }, { passive: false });
          }
        });
      }
    </script>
  </body>
</html>
